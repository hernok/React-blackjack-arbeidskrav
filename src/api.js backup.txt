//import {useEffect, useState} from "react";
/*
function ImportCards() {
	function loadDeckId() {
		fetch("https://www.deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1")
			.then((response) => response.json())
			.then((data) => setDeckId(data.deck_id));
	}
	async function loadDeckOfCards() {
		await fetch(
			"https://www.deckofcardsapi.com/api/deck/",
			{deckId},
			"/draw/?count=2"
		)
			.then((response) => response.json())
			.then((data) => setDeckOfCards(data.cards));
	}
	const [deckId, setDeckId] = useState([]);
	const [deckOfCards, setDeckOfCards] = useState([]);
	useEffect(() => {
		loadDeckId();
	}, []);
	useEffect(() => {
		loadDeckOfCards();
	}, []);

	return ImportCards();
}*/
















import axios from "axios";


const api = axios.create({
	baseURL: "https://deckofcardsapi.com/api/deck/",
});

// Requests create deck from api
export const createStack = async () => {
	const {data} = await api.get("new/shuffle/", {
		params: {
			stack_count: 1,
		},
	});
	console.log(data);
	// Requests a card from requested deck
	const {deck_id: deckId} = data;
	const cardRes = await DrawCard(deckId);
	return cardRes;
};

async function DrawCard(deckId) {
	const {data} = await api.get(`${deckId}/draw/`, {
		//pushes into new array, named cards[]
		params: {
			count: 1,
		},
	});
	const {cards} = data;
	console.log(data);
	//cards[] displays the new card array
	const {value, image} = cards[0];
	return {deckId, value, image};
}

export default DrawCard;
